{"version":3,"file":"commonHelpers.js","sources":["../src/js/error.js","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/js/markup.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction emptySearch() {\n  iziToast.show({\n    title: 'Error',\n    message: 'Please enter a search term to begin your search.',\n    titleSize: '16px',\n    titleLineHeight: '150%',\n    messageSize: '16px',\n    messageLineHeight: '150%',\n    backgroundColor: '#ef4040',\n    position: 'bottomRight',\n  });\n}\n\nfunction noImages() {\n  iziToast.show({\n    title: 'Ooops...',\n    message:\n      'There are no images matching your search query. Please try again!',\n    titleSize: '16px',\n    titleLineHeight: '150%',\n    messageSize: '16px',\n    messageLineHeight: '150%',\n    backgroundColor: '#ef4040',\n    position: 'bottomRight',\n  });\n}\n\nfunction endOfSearch() {\n  iziToast.show({\n    title: 'Error',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    titleSize: '16px',\n    titleLineHeight: '150%',\n    messageSize: '16px',\n    messageLineHeight: '150%',\n    backgroundColor: '#ef4040',\n    position: 'bottomRight',\n  });\n}\n\nfunction errorMessage() {\n  iziToast.show({\n    title: 'Error',\n    message: err.message,\n    titleSize: '16px',\n    titleLineHeight: '150%',\n    messageSize: '16px',\n    messageLineHeight: '150%',\n    backgroundColor: '#ef4040',\n    position: 'bottomRight',\n  });\n}\n\nexport default { emptySearch, noImages, endOfSearch, errorMessage };","const spanLoader = document.querySelector('.loader');\nconst btnNext = document.querySelector('.btn');\n\nexport function showLoader() {\n  spanLoader.style.display = 'block';\n}\nexport function hideLoader() {\n  spanLoader.style.display = 'none';\n}\nexport function hideLoadMore() {\n  btnNext.style.display = 'none';\n}\nexport function showLoadMore() {\n  btnNext.style.display = 'block';\n}","import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/';\nconst myApiKey = '42272856-fbb9ecaa9aa7f62044da3b204';\n\nexport async function getImage(imageName, page) {\n  const response = await axios.get('api/', {\n    params: {\n      key: myApiKey,\n      per_page: 15,\n      page,\n      q: imageName,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return response.data;\n}","export function imageTemplate({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) {\n    return `<li class=\"gallery-item\"><a href=\"${largeImageURL}\"><img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n  <div class=\"description\"> <p>Likes <span>${likes}</span></p><p>Views <span>${views}</span></p><p>Comments <span>${comments}</span></p><p>Downloads <span>${downloads}</span></p></div></li>`;\n  }","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport error from './js/error.js';\nimport {\n  hideLoader,\n  hideLoadMore,\n  showLoader,\n  showLoadMore,\n} from './js/render-functions.js';\nimport { getImage } from './js/pixabay-api.js';\nimport { imageTemplate } from './js/markup';\n\nconst form = document.querySelector('.search-form');\nconst pictures = document.querySelector('.gallery');\nconst btnNext = document.querySelector('.btn');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet availablePages = 0;\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', searchImage);\nbtnNext.addEventListener('click', loadMore);\n\nasync function searchImage(evt) {\n  evt.preventDefault();\n  const image = evt.target.elements.image.value.trim();\n  pictures.innerHTML = '';\n  hideLoadMore();\n  try {\n    if (image === '') {\n      error.emptySearch();\n      return;\n    }\n    showLoader();\n    currentQuery = image;\n    currentPage = 1;\n    const data = await getImage(currentQuery, currentPage);\n    if (data.totalHits > 0) {\n      const markup = data.hits.map(imageTemplate).join('\\n\\n');\n      pictures.insertAdjacentHTML('beforeend', markup);\n      const element = pictures.firstElementChild.getBoundingClientRect();\n      window.scrollBy({ top: element.height, behavior: 'smooth' });\n      gallery.refresh();\n      showLoadMore();\n      form.reset();\n      availablePages = Math.ceil(data.totalHits / 15);\n    } else {\n      pictures.innerHTML = '';\n      error.noImages();\n    }\n  } catch (err) {\n    error.errorMessage();\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function loadMore() {\n  try {\n    showLoader();\n    currentPage += 1;\n    const data = await getImage(currentQuery, currentPage);\n    const markup = data.hits.map(imageTemplate).join('\\n\\n');\n    pictures.insertAdjacentHTML('beforeend', markup);\n    const element = pictures.firstElementChild.getBoundingClientRect();\n    window.scrollBy({ top: element.height, behavior: 'smooth' });\n    gallery.refresh();\n    if (currentPage === availablePages) {\n      error.endOfSearch();\n      hideLoadMore();\n    }\n  } catch (err) {\n    error.errorMessage();\n  } finally {\n    hideLoader();\n  }\n}"],"names":["emptySearch","iziToast","noImages","endOfSearch","errorMessage","error","spanLoader","btnNext","showLoader","hideLoader","hideLoadMore","showLoadMore","axios","myApiKey","getImage","imageName","page","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","pictures","currentPage","currentQuery","availablePages","gallery","SimpleLightbox","searchImage","loadMore","evt","image","data","markup","element"],"mappings":"owBAGA,SAASA,GAAc,CACrBC,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,mDACT,UAAW,OACX,gBAAiB,OACjB,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,SAAU,aACd,CAAG,CACH,CAEA,SAASC,GAAW,CAClBD,EAAS,KAAK,CACZ,MAAO,WACP,QACE,oEACF,UAAW,OACX,gBAAiB,OACjB,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,SAAU,aACd,CAAG,CACH,CAEA,SAASE,GAAc,CACrBF,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,6DACT,UAAW,OACX,gBAAiB,OACjB,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,SAAU,aACd,CAAG,CACH,CAEA,SAASG,GAAe,CACtBH,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,IAAI,QACb,UAAW,OACX,gBAAiB,OACjB,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,SAAU,aACd,CAAG,CACH,CAEA,MAAeI,EAAA,CAAE,YAAAL,EAAa,SAAAE,EAAU,YAAAC,EAAa,aAAAC,CAAc,ECxD7DE,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAU,SAAS,cAAc,MAAM,EAEtC,SAASC,GAAa,CAC3BF,EAAW,MAAM,QAAU,OAC7B,CACO,SAASG,GAAa,CAC3BH,EAAW,MAAM,QAAU,MAC7B,CACO,SAASI,GAAe,CAC7BH,EAAQ,MAAM,QAAU,MAC1B,CACO,SAASI,GAAe,CAC7BJ,EAAQ,MAAM,QAAU,OAC1B,CCbAK,EAAM,SAAS,QAAU,uBACzB,MAAMC,EAAW,qCAEV,eAAeC,EAASC,EAAWC,EAAM,CAY9C,OAXiB,MAAMJ,EAAM,IAAI,OAAQ,CACvC,OAAQ,CACN,IAAKC,EACL,SAAU,GACV,KAAAG,EACA,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACL,CAAG,GACe,IAClB,CCjBO,SAASE,EAAc,CAC1B,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACJ,EAAK,CACD,MAAO,qCAAqCL,CAAa,qCAAqCD,CAAY,UAAUE,CAAI;AAAA,6CAC/EC,CAAK,6BAA6BC,CAAK,gCAAgCC,CAAQ,iCAAiCC,CAAS,wBACtK,CCCA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAW,SAAS,cAAc,UAAU,EAC5CnB,EAAU,SAAS,cAAc,MAAM,EAE7C,IAAIoB,EAAc,EACdC,EAAe,GACfC,EAAiB,EAErB,MAAMC,EAAU,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,aAAc,GAChB,CAAC,EAEDN,EAAK,iBAAiB,SAAUO,CAAW,EAC3CzB,EAAQ,iBAAiB,QAAS0B,CAAQ,EAE1C,eAAeD,EAAYE,EAAK,CAC9BA,EAAI,eAAc,EAClB,MAAMC,EAAQD,EAAI,OAAO,SAAS,MAAM,MAAM,OAC9CR,EAAS,UAAY,GACrBhB,IACA,GAAI,CACF,GAAIyB,IAAU,GAAI,CAChB9B,EAAM,YAAW,EACjB,MACD,CACDG,IACAoB,EAAeO,EACfR,EAAc,EACd,MAAMS,EAAO,MAAMtB,EAASc,EAAcD,CAAW,EACrD,GAAIS,EAAK,UAAY,EAAG,CACtB,MAAMC,EAASD,EAAK,KAAK,IAAInB,CAAa,EAAE,KAAK;AAAA;AAAA,CAAM,EACvDS,EAAS,mBAAmB,YAAaW,CAAM,EAC/C,MAAMC,EAAUZ,EAAS,kBAAkB,sBAAqB,EAChE,OAAO,SAAS,CAAE,IAAKY,EAAQ,OAAQ,SAAU,QAAQ,CAAE,EAC3DR,EAAQ,QAAO,EACfnB,IACAc,EAAK,MAAK,EACVI,EAAiB,KAAK,KAAKO,EAAK,UAAY,EAAE,CACpD,MACMV,EAAS,UAAY,GACrBrB,EAAM,SAAQ,CAEjB,MAAa,CACZA,EAAM,aAAY,CACtB,QAAY,CACRI,GACD,CACH,CAEA,eAAewB,GAAW,CACxB,GAAI,CACFzB,IACAmB,GAAe,EAEf,MAAMU,GADO,MAAMvB,EAASc,EAAcD,CAAW,GACjC,KAAK,IAAIV,CAAa,EAAE,KAAK;AAAA;AAAA,CAAM,EACvDS,EAAS,mBAAmB,YAAaW,CAAM,EAC/C,MAAMC,EAAUZ,EAAS,kBAAkB,sBAAqB,EAChE,OAAO,SAAS,CAAE,IAAKY,EAAQ,OAAQ,SAAU,QAAQ,CAAE,EAC3DR,EAAQ,QAAO,EACXH,IAAgBE,IAClBxB,EAAM,YAAW,EACjBK,IAEH,MAAa,CACZL,EAAM,aAAY,CACtB,QAAY,CACRI,GACD,CACH"}