import{i as c,S as f}from"./assets/vendor-5b791d57.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const m="/goit-js-hw-12/assets/bi_x-octagon-ddf7add7.svg",s={form:document.querySelector(".form"),gallery:document.querySelector(".gallery"),loader:document.querySelector(".loader"),btnLoadMore:document.querySelector(".btn-load-more")};let d="",u=1,h=0;const p=15;s.form.addEventListener("submit",L);s.btnLoadMore.addEventListener("click",b);async function L(e){if(e.preventDefault(),s.btnLoadMore.classList.add("hidden"),d===e.target.elements.query.value.trim()){e.target.reset(),l();return}else d=e.target.elements.query.value.trim();u=1,s.gallery.textContent="",a();try{const t=await getImages();if(d)parseInt(t.totalHits)>0?(l(),renderMarkup(t.hits),h=t.totalHits,y(),a()):(c.error({message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight",backgroundColor:"red",messageColor:"white",messageSize:"16px",iconColor:"white",iconUrl:m,color:"white",timeout:2e3}),a());else{c.warning({message:"Sorry, you forgot to enter a search term. Please try again!",position:"topRight",messageSize:"16px",timeout:2e3}),a();return}}catch{c.error({message:"Error",position:"topRight",backgroundColor:"red",messageColor:"white",messageSize:"16px",iconColor:"white",iconUrl:m,color:"white",timeout:2e3}),a()}e.target.reset()}new f(".gallery a",{showCounter:!1,captionDelay:250,captions:!0,captionsData:"alt",captionPosition:"bottom"});async function b(){a(),l(),u+=1;const e=await getImages();renderMarkup(e.hits),l(),y(),a(),w()}function y(){Math.ceil(h/p)<=u&&(s.btnLoadMore.classList.add("hidden"),c.info({message:"We're sorry, but you've reached the end of search results.",position:"topRight",messageSize:"16px",timeout:2e3}))}function a(){s.loader.classList.toggle("hidden")}function l(){s.btnLoadMore.classList.toggle("hidden")}function w(){const e=document.querySelector(".gallery-link");if(e){const n=e.getBoundingClientRect().height;window.scrollBy({top:n*2,behavior:"smooth"})}else return}async function S(){const e="https://pixabay.com/api/",t={}.VITE_API_KEY,n=`${e}?key=${t}`;try{const{data:i}=await axios.get(n,{params:{image_type:"photo",orientation:"horizontal",safesearch:"true",q:query,per_page:PER_PAGE,page:currentPage}});return i}catch(i){console.error("Сталася помилка при отриманні зображень:",i.message)}}refs.form.addEventListener("submit",P);refs.btnLoadMore.addEventListener("click",loadMore);async function P(e){if(e.preventDefault(),refs.btnLoadMore.classList.add("hidden"),query===e.target.elements.query.value.trim()){e.target.reset(),toggleBtnLoadMore();return}else query=e.target.elements.query.value.trim();currentPage=1,refs.gallery.textContent="",toggleLoader();try{const t=await S();if(query)parseInt(t.totalHits)>0?(toggleBtnLoadMore(),renderMarkup(t.hits),total=t.totalHits,checkBtnStatus(),toggleLoader()):(iziToast.error({message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight",backgroundColor:"red",messageColor:"white",messageSize:"16px",iconColor:"white",iconUrl:errorIcon,color:"white",timeout:2e3}),toggleLoader());else{iziToast.warning({message:"Sorry, you forgot to enter a search term. Please try again!",position:"topRight",messageSize:"16px",timeout:2e3}),toggleLoader();return}}catch{iziToast.error({message:"Error",position:"topRight",backgroundColor:"red",messageColor:"white",messageSize:"16px",iconColor:"white",iconUrl:errorIcon,color:"white",timeout:2e3}),toggleLoader()}e.target.reset()}
//# sourceMappingURL=commonHelpers.js.map
